---
id: S-28
status: complete
step: complete
milestone: parallel-state
started: 2026-02-22
updated: 2026-02-22
tests: 93
security_tests: 0
session:
deps:
---

# S-28: Slice State Foundation Documents

## Why
All parallel-state commands need a shared schema and detection protocol before any implementation can begin. Without these foundation documents, every command would independently define its own slice file format and detection logic, leading to inconsistencies.

## What
Create `templates/slice-state.md` (schema, lifecycle, session tracking, body sections, naming, examples) and `references/state-format.md` (detection logic, concurrent access patterns, STATE.md regeneration, crash safety, backward compatibility).

## Dependencies
None — this is the first slice in the parallel-state milestone.

## Contracts
- C-76: SliceStateTemplate
- C-77: StateFormatReference

## Decisions
- 2026-02-22: Matched existing test patterns (strings.Contains, strings.Index) for markdown content verification
- 2026-02-22: Template at 339 lines (over the ~120 estimate) to include comprehensive examples and error definitions

## Files
- src/templates/slice-state.md (new — 339 lines)
- src/references/state-format.md (new — 206 lines)
- internal/installer/slice_state_docs_test.go (new — 1567 lines, 93 tests)
