---
id: S-32
status: complete
step: complete
milestone: parallel-state
started: 2026-02-22
updated: 2026-02-22
tests: 55
security_tests: 0
session:
deps: S-28
---

# S-32: Migration Command

## Why
Existing projects use STATE.md as their source of truth. They need a safe, explicit migration path to file-per-slice state. Without this command, existing projects cannot benefit from concurrent session safety.

## What
Create `/gl:migrate-state` command that parses legacy STATE.md, creates `.greenlight/slices/` directory with individual slice files, creates project-state.json, backs up STATE.md, and generates new STATE.md in generated format. Migration is explicit (D-32), one-way, and all-or-nothing.

## Dependencies
- S-28: Slice State Foundation Documents (slice file schema for target format)

## Contracts
- C-85: MigrateStateCommand
- C-86: MigrationBackupSafety

## Decisions
- 2026-02-22: New command file created (~287 lines) — 9-step migration flow with all-or-nothing atomicity

## Files
- src/commands/gl/migrate-state.md (new — ~287 lines)
- internal/installer/migrate_state_command_test.go (new — 632 lines, 55 tests)
