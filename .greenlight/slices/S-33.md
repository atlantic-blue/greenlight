---
id: S-33
status: complete
step: complete
milestone: parallel-state
started: 2026-02-22
updated: 2026-02-22
tests: 22
security_tests: 0
session:
deps: S-28
---

# S-33: Documentation Updates

## Why
All agents need to know about state format detection. CLAUDE.md must have a hard rule. The state template must document both formats. The checkpoint protocol must reference slice files.

## What
Update `src/CLAUDE.md` with state format awareness rule. Update `src/templates/state.md` to document both formats and the generated nature of STATE.md. Update `src/references/checkpoint-protocol.md` to reference slice files for state context.

## Dependencies
- S-28: Slice State Foundation Documents (state-format.md and slice-state.md must exist for cross-references)

## Contracts
- C-87: CLAUDEmdStateFormatRule
- C-88: StateTemplateUpdate
- C-89: CheckpointProtocolUpdate

## Decisions
- 2026-02-22: State format rule inserted before "What NOT To Do" in CLAUDE.md — preserves existing section ordering

## Files
- src/CLAUDE.md (modified — +5 lines)
- src/templates/state.md (modified — +33 lines)
- src/references/checkpoint-protocol.md (modified — +10 lines)
- internal/installer/documentation_state_update_test.go (new — 242 lines, 22 tests)
